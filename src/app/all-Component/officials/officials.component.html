<div class="page-wrapper">
    <div class="content container-fluid">
      <main>
        <div class="card margin-card">
          <div class="card-body">
            <div class="page-header main-page-header d-flex align-items-center justify-content-between">
              <div class="main-page-title page-title playerbackground">
                <i class="fa fa-universal-access" aria-hidden="true"></i>
                     All Official
              </div>
               <form class="flex-grow-1 mx-3 search-width">
                <div class="form-group">
                  <span class="p-input-icon-left ml-auto">
                    <span class="p-input-icon-right input-icons search-padding">
                      <input pInputText type="text" 
                        class="form-control width-search p-input-icon-right" placeholder="{{'  Search'}}"
                       />
                    </span>
                  </span>
                </div>
                
              </form> 
            
              <div class="card flex justify-center">
                <p-button 
                icon="fas fa-plus" 
                label="New Official" 
                (click)="showDialog()" 
                styleClass="new-button p-button-text">
              </p-button>
              </div>
            </div> 
                    <!-- View Official In Grid Load-->
                    <p-dialog [(visible)]="visibleDialog" [style]="{ width: '30vw' }" [closable]="false" [modal]="true">
    
                      <div class="tabel-info position-relative">
                        <div class="view-name">{{ selectedOfficial?.name | uppercase }}</div>
                        <button 
                        type="button" 
                        pButton 
                        icon="pi pi-times" 
                        class="p-button-rounded p-button-text close-btn"
                        (click)="visibleDialog = false"
                        style="position: absolute; right: 1rem; top: 1rem; color: #e53935;" 
                        aria-label="Close">
                      </button>
                      
                      </div>
                    
                      <!-- Grid Info -->    
                      <div class="tabel-grid">
                        <div class="info-block">
                          <label>Country</label>
                          <div>{{ selectedOfficial?.country}}</div>
                        </div>
                        <div class="info-block">
                          <label>Official Type</label>
                          <div>{{ selectedOfficial?.type }}</div>
                        </div>
                        
                      </div>
                    
                    </p-dialog>
                    
                    <p-sidebar 
                    [(visible)]="sidebarVisible"
                    position="right"
                    [style]="{ width: '100vw' }"
                    [modal]="true"
                    [baseZIndex]="10000"
                    [closeOnEscape]="false"
                    styleClass="custom-sidebar"
                    [showCloseIcon]="false" >
                  
                    <!-- Sidebar Header -->
                    <div class="d-flex justify-content-between align-items-center mb-4">
                      <h4 class="mb-0">{{ isEditMode ? 'Edit Official' : 'Add Official' }}</h4>
                    </div>
                  
                    <!-- Sidebar Content -->
                    <div (click)="$event.stopPropagation()">
                      <form class="p-fluid">
                        <div class="row g-3">
                          <div class="col-md-6">
                            <label for="officialName" class="form-label">Official Name</label>
                            <input id="officialName" type="text" class="form-control" />
                          </div>
                  
                          <!-- Country -->
                          <div class="col-md-6">
                            <label for="country" class="form-label">Country</label>
                            <input id="country" type="text" class="form-control" />
                          </div>
                  
                          <!-- Official Type -->
                          <div class="col-md-6">
                            <label for="officialType" class="form-label">Official Type</label>
                            <input id="officialType" type="text" class="form-control" />
                          </div>
                        </div>
                  
                        <!-- Buttons -->
                        <div class="mt-5 d-flex justify-content-end gap-2">
                          <button 
                            pButton 
                            type="button" 
                            label="Cancel" 
                            class="p-button-secondary"
                            (click)="sidebarVisible = false">
                          </button>
                  
                          <button 
                            pButton 
                            type="button" 
                            label="{{ isEditMode ? 'Update' : 'Add' }}" 
                            class="p-button-primary">
                          </button>
                        </div>
                      </form>
                    </div>
                  </p-sidebar>
                    
  
            <p-table 
            [value]="officialList" 
            [tableStyle]="{ 'min-width': '50rem' }" 
            scrollable="true" 
            [paginator]="true" 
            [rows]="5" 
            [rowsPerPageOptions]="[5,10,20]"
            [globalFilterFields]="['Official_name']"
            >
            <ng-template pTemplate="header">
              <tr>
                <th class="custom-header" pSortableColumn="name">Official Name
                  <p-sortIcon field="name"></p-sortIcon>
  
                </th>
                <th class="custom-header">Country   
                  <p-sortIcon field="Official_name"></p-sortIcon>
                </th>
                <th class="custom-header">Official Type
                  <p-sortIcon field="Official_name"></p-sortIcon>
                </th>
                <th class="custom-header">Status
                  <p-sortIcon field="Official_name"></p-sortIcon>
                </th>
                <th class="custom-header action-column-header">Actions</th>       
              </tr>
            </ng-template>
          
            <ng-template pTemplate="body" let-official let-rowIndex="rowIndex">
              <tr [ngClass]="{ 'even-row': rowIndex % 2 == 1 }">
              
                <td>
                  {{ official.name }}
                  <img [src]="official.imageUrl" class="gird-image" />
                </td>

                <td>{{ official.country }}</td>
                <td>{{ official.type }}</td>
                <td>
                  <span
                    [ngStyle]="{
                      'background-color': official.status === 'Active' ? '#0ea5e9' : 'rgb(255 33 33)',
                      'color': 'white',
                      'padding': '4px 8px',
                      'border-radius': '4px',
                      'display': 'inline-block'
                    }">
                    {{ official.status }}
                  </span>
                </td> 
                <td class="action-column">
                  <div class="action-icon" (click)="editofficial(official)">
                    <span >
                      <i class="fa fa-pencil-square" aria-hidden="true"></i>
                    </span>
                  </div>
                  <div class="action-icon" (click)="viewShowDialog()" (click)="viewofficial(official)">
                    <span >
                      <i class="fa fa-eye" aria-hidden="true"></i>
                    </span>
                  </div>
                  <div class="action-icon"(click)="toggleStatus(official)">
                    <span >
                      <i class="fa" [ngClass]="official.status === 'Active' ? 'fa-times' : 'fa-check-square'"></i>
                    </span>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
          </div>
        </div>
      </main>
    </div>
  </div>