<!-- --SCORECARD ---->
<div *ngIf="selectedMatch && activePage=='scorecard'" class="points-form-fullpage">

<!-- Scorecard Header (Result Page) -->
<div class="match-center">
  <h2 class="heading2">Result</h2>
  <div class="matches-list">
    <div class="match-row">

      <!-- Left Info -->
      <div class="left-info">
        <h6>
          <span class="head">{{ scorecardHeader.competitionName }}</span>
          <span class="match-date">({{ scorecardHeader.startDate }})</span>
        </h6>
        <div class="series">({{ scorecardHeader.matchType }} - {{ scorecardHeader.venue }})</div>
      </div>

      <!-- Teams -->
      <div class="teams">

        <!-- Team A -->
        <div class="team left-team">
          <span class="team-name">{{ scorecardHeader.teamA }} Innings</span>
          <div class="team-score">
            <ng-container *ngIf="scorecardHeader.teamASummary?.length; else yetToBatA">
              <div class="innings-score">
                <span *ngFor="let inn of scorecardHeader.teamASummary" class="score-text innings-col">
                  <span>{{ inn.runs }}</span>
                  <span class="overs-text">({{ inn.overs }})</span>
                </span>
              </div>
            </ng-container>
            <ng-template #yetToBatA>Yet to Bat</ng-template>
          </div>
        </div>

        <!-- VS block -->
        <div class="vs-wrapper">
          <img src="assets/images/game.png" alt="VS" class="VS-icon" />
          <div class="result-status" *ngIf="scorecardHeader.result">
            <strong>{{ scorecardHeader.result }}</strong>
          </div>
        </div>

        <!-- Team B -->
        <div class="team right-team">
          <span class="team-name">{{ scorecardHeader.teamB }} Innings</span>
          <div class="team-score">
            <ng-container *ngIf="scorecardHeader.teamBSummary?.length; else yetToBatB">
              <div class="innings-score">
                <span *ngFor="let inn of scorecardHeader.teamBSummary" class="score-text innings-col">
                  <span>{{ inn.runs }}</span>
                  <span class="overs-text">({{ inn.overs }})</span>
                </span>
              </div>
            </ng-container>
            <ng-template #yetToBatB>Yet to Bat</ng-template>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>



  <!-- Back Button -->
  <div class="form-actions">
    <button type="button" (click)="closeScorecard()">Back</button>
  </div>
  <!-- Tabs -->
  <!-- <h2 class="heading3">Score Details</h2> -->
  <div class="scorecard-container">
    <div class="tabs">
      <span class="tab" (click)="activeTab='scorecard'"
        [ngClass]="{ activeTab: activeTab==='scorecard' }">Scorecard</span>
      <span class="tab" (click)="activeTab='squad'" [ngClass]="{ activeTab: activeTab==='squad' }">Squad</span>
      <span class="tab" (click)="activeTab='videos'" [ngClass]="{ activeTab: activeTab==='videos' }">Videos</span>
    </div>
<!-- Dynamic innings button -->
<div class="innings-button" *ngIf="scorecardHeader.matchType !== 'Multiday'">
 <button 
  *ngFor="let inn of scorecardHeader.teamASummary; let i = index"
  (click)="setActiveInnings('A', i)"
  [ngClass]="{ activetab: activeInnings === 'A' + i }">
  {{ scorecardHeader.teamA }} Inn {{ i+1 }} {{ inn }}
</button>

<button 
  *ngFor="let inn of scorecardHeader.teamBSummary; let j = index"
  (click)="setActiveInnings('B', j)"
  [ngClass]="{ activetab: activeInnings === 'B' + j }">
  {{ scorecardHeader.teamB }} Inn {{ j+1 }} {{ inn }}
</button>
</div>
     <!-- Test match innings button -->
    <div class="test-innings-button" *ngIf="scorecardHeader.matchType === 'Multiday' && activeTab==='scorecard'">
      <button class="innings-one" (click)="activeinnings='testone'"
       [ngClass]="{ activetab: activeinnings=== 'testone'}">{{ scorecardHeader.teamA }} 1st Inns {{ scorecardHeader.teamASummary [0] }}
</button> 
      <button class="innings-two" (click)="activeinnings='testtwo'"
        [ngClass]="{ activetab: activeinnings=== 'testtwo'}">{{ scorecardHeader.teamB }} 1nd Inns {{ scorecardHeader.teamBSummary [0] }}</button>
      <button class="innings-one" (click)="activeinnings='testthird'"
        [ngClass]="{ activetab: activeinnings=== 'testthird'}">{{ scorecardHeader.teamA }} 2st Inns {{ scorecardHeader.teamASummary [1] }}</button>
      <button class="innings-two" (click)="activeinnings='testfour'"
        [ngClass]="{ activetab: activeinnings=== 'testfour'}">{{ scorecardHeader.teamB }} 2nd Inns {{ scorecardHeader.teamBSummary [1] }}</button>
     </div>

    <!-- Scorecard Tab -->
    <div *ngIf="activeTab==='scorecard'">

      <!-- Scorecard tables for both teams visible by default -->
       <div class="scorecard-teams-visible" *ngIf="scorecardHeader.type !== 'Upcoming'">

         <!--Team A Batting & Team B Bowling -->
         <div class="team-scorecard" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'A0'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamA }} Batting</span>
          <ng-container *ngTemplateOutlet="battingTable; context:{ batters: battingSummariesInnings1 }"></ng-container>
        </div>

        <!-- fall of wickets -->
         <div class="fall-of-wickets" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'A0'">
          <span class="fallOfwicketsTitle">Fall Of Wickets</span>
          <ng-container *ngTemplateOutlet="fallOfWicketTable; context:{ wickets: fallOfWicketsInnings1 }"></ng-container>
        </div>

        <div class="team-scorecard" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'A0'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamB }} Bowling</span>
          <ng-container *ngTemplateOutlet="bowlingTable; context:{ bowlers: bowlingSummariesInnings1 }"></ng-container>
        </div> 

        <!-- Team B Batting & Team A Bowling -->
        <div class="team-scorecard" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'B0'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamB }} Batting</span>
          <ng-container *ngTemplateOutlet="battingTable; context:{ batters: battingSummariesInnings2 }"></ng-container>
        </div>

        <!-- fall of wickets -->
        <div class="fall-of-wickets" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'B0'">
          <span class="fallOfwicketsTitle">Fall Of Wickets</span>
          <ng-container *ngTemplateOutlet="fallOfWicketTable; context:{ wickets: fallOfWicketsInnings2 }"></ng-container>
        </div> 

        <div class="team-scorecard" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'B0'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamA }} Bowling</span>
          <ng-container *ngTemplateOutlet="bowlingTable; context:{ bowlers: bowlingSummariesInnings2 }"></ng-container>
        </div>
        <!-- Team B Batting & Team A Bowling -->
        <div class="team-scorecard" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'A1'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamB }} Batting</span>
          <ng-container *ngTemplateOutlet="battingTable; context:{ batters: battingSummariesInnings3 }"></ng-container>
        </div>

        <!-- fall of wickets -->
        <div class="fall-of-wickets" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'A1'">
          <span class="fallOfwicketsTitle">Fall Of Wickets</span>
          <ng-container *ngTemplateOutlet="fallOfWicketTable; context:{ wickets: fallOfWicketsInnings3 }"></ng-container>
        </div> 

        <div class="team-scorecard" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'A1'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamA }} Bowling</span>
          <ng-container *ngTemplateOutlet="bowlingTable; context:{ bowlers: bowlingSummariesInnings3 }"></ng-container>
        </div><!-- Team B Batting & Team A Bowling -->
        <div class="team-scorecard" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'B1'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamB }} Batting</span>
          <ng-container *ngTemplateOutlet="battingTable; context:{ batters: battingSummariesInnings4 }"></ng-container>
        </div>

        <!-- fall of wickets -->
        <div class="fall-of-wickets" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'B1'">
          <span class="fallOfwicketsTitle">Fall Of Wickets</span>
          <ng-container *ngTemplateOutlet="fallOfWicketTable; context:{ wickets: fallOfWicketsInnings4 }"></ng-container>
        </div> 

        <div class="team-scorecard" *ngIf="scorecardHeader.matchType !== 'Multiday' && activeInnings === 'B1'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamA }} Bowling</span>
          <ng-container *ngTemplateOutlet="bowlingTable; context:{ bowlers: bowlingSummariesInnings4 }"></ng-container>
        </div>
      </div> 

      <!--Test Match Inngings  -->
      <div class="scorecard-teams-visible"
        *ngIf="scorecardHeader.type !== 'Upcoming' && scorecardHeader.matchType === 'Multiday'">

        <!-- Team A Batting & Team B Bowling first inngings-->
        <div class="team-scorecard" *ngIf="activeinnings === 'testone'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamA }} Batting 1st inn</span>
          <ng-container *ngTemplateOutlet="battingTable; context:{ batters: battingSummariesInnings1 }"></ng-container>
        </div>

        <!-- fall of wickts -->
        <div class="fall-of-wickets" *ngIf=" activeinnings === 'testone'">
          <span class="fallOfwicketsTitle">Fall Of Wickets</span>
          <ng-container *ngTemplateOutlet="fallOfWicketTable; context:{ wickets: fallOfWicketsInnings1 }"></ng-container>
        </div>

        <div class="team-scorecard" *ngIf="activeinnings === 'testone'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamB }} Bowling</span>
          <ng-container *ngTemplateOutlet="bowlingTable; context:{ bowlers: bowlingSummariesInnings1 }"></ng-container>
        </div>

        <!-- Team B Batting & Team A Bowling first Inngings -->
        <div class="team-scorecard" *ngIf="activeinnings === 'testtwo'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamB }} Batting 2nd inn</span>
          <ng-container *ngTemplateOutlet="battingTable; context:{ batters: battingSummariesInnings2 }"></ng-container>
        </div>

        <div class="fall-of-wickets" *ngIf=" activeinnings === 'testtwo'">
          <span class="fallOfwicketsTitle">Fall Of Wickets</span>
          <ng-container *ngTemplateOutlet="fallOfWicketTable; context:{ wickets: fallOfWicketsInnings2 }"></ng-container>
        </div>

        <div class="team-scorecard" *ngIf="activeinnings === 'testtwo'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamA }} Bowling</span>
          <ng-container *ngTemplateOutlet="bowlingTable; context:{ bowlers: bowlingSummariesInnings2 }"></ng-container>
        </div>

        <!-- Team A Batting & Team B Bowling second inngings-->
        <div class="team-scorecard" *ngIf="activeinnings === 'testthird'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamA }} Batting 3rd inn</span>
          <ng-container *ngTemplateOutlet="battingTable; context:{ batters: battingSummariesInnings3 }"></ng-container>
        </div>

        <div class="fall-of-wickets" *ngIf=" activeinnings === 'testthird'">
          <span class="fallOfwicketsTitle">Fall Of Wickets</span>
          <ng-container *ngTemplateOutlet="fallOfWicketTable; context:{ wickets: fallOfWicketsInnings3 }"></ng-container>
        </div>

        <div class="team-scorecard" *ngIf="activeinnings === 'testthird'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamB }} Bowling</span>
          <ng-container *ngTemplateOutlet="bowlingTable; context:{ bowlers: bowlingSummariesInnings3 }"></ng-container>
        </div>

        <!-- Team B Batting & Team A Bowling second Inngings -->
        <div class="team-scorecard" *ngIf="activeinnings === 'testfour'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamB }} Batting 4th inn</span>
          <ng-container *ngTemplateOutlet="battingTable; context:{ batters: battingSummariesInnings4 }"></ng-container>
        </div>

        <div class="fall-of-wickets" *ngIf=" activeinnings === 'testfour'">
          <span class="fallOfwicketsTitle">Fall Of Wickets</span>
          <ng-container *ngTemplateOutlet="fallOfWicketTable; context:{ wickets: fallOfWicketsInnings4 }"></ng-container>
        </div>

        <div class="team-scorecard" *ngIf="activeinnings === 'testfour'">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamA }} Bowling</span>
          <ng-container *ngTemplateOutlet="bowlingTable; context:{ bowlers: bowlingSummariesInnings4 }"></ng-container>
        </div>
      </div>
      <!-- Fall of wickets -->
      <ng-template #fallOfWicketTable let-wickets="wickets">
        <div class="table-scroll">
          <table class="scorecard-table">
            <thead>
              <tr>
                <th>Batter</th>
                <th>Score</th>
                <th>Over</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let w of wickets">
                <td class="player-wicket">
                  <div>{{ w.player_name }}</div>
                  <div>{{ w.wicket_desc }}</div>
                </td>
                <td>{{ w.team_total }}</td>
                <td>{{ w.over_value }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </ng-template>


    </div>
    <!-- Squad Tab -->
    <div *ngIf="activeTab==='squad'">
      <!-- Show Both Teams' Squads by default -->
      <div class="squad-teams-visible">
        <!-- Team A Squad -->
        <div class="team-squad">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamA }} Squad</span>
          <ng-container *ngTemplateOutlet="squadTable; context:{ players: teamAsquad }"></ng-container>
        </div>
        <!-- Team B Squad -->
        <div class="team-squad">
          <span class="TeamsScoreFont">{{ scorecardHeader.teamB }} Squad</span>
          <ng-container *ngTemplateOutlet="squadTable; context:{ players: teamBsquad }"></ng-container>
        </div>
      </div>
    </div>
    <!-- Reusable Squad Table Template -->
    <ng-template #squadTable let-players="players">
      <div class="table-scroll">
        <table class="scorecard-table">
          <thead>
            <tr>
              <th>Player</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let player of players">
              <td>{{ player }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </ng-template>
    <!-- Videos Tab -->
    <div *ngIf="activeTab==='videos'">
      <p>Videos Not Available Right now.....</p>
    </div>
  </div>
  <!-- Match Details (ONLY SHOW ON SCORECARD) -->

</div>

<!-- --Reusable Team Block ---->
<ng-template #teamBlock let-team="team" let-side="side">
  <div class="team" [ngClass]="side+'-team'">
    <span class="team-name">{{ team }}</span>
    <img [src]="team.logo" />
    <div class="team-score">
      <ng-container *ngIf="selectedMatch.matchType==='Multiday'; else normalScore">
        <div class="innings-row">
          <div class="innings-header">
            <span *ngFor="let inn of team.innings; let i=index" class="innings-col">Inn {{ i+1 }}</span>
          </div>
          <div class="innings-score">
            <span *ngFor="let inn of team.innings" class="score-text innings-col">{{ inn.split('(')[0].trim() }}</span>
          </div>
          <div class="innings-overs">
            <span *ngFor="let inn of team.innings" class="overs-text innings-col">
              ({{ inn.split('(')[1] ? inn.split('(')[1].replace(')','') : '' }})
            </span>
          </div>
        </div>
      </ng-container>
      <ng-template #normalScore>
        <ng-container *ngIf="team.score; else yetToBat">
          <span class="score-text">{{ team.score.split(' ')[0] }}</span><br>
          <small class="overs-text">{{ team.score.split(' ')[1] || '' }}</small>
        </ng-container>
        <ng-template #yetToBat>{{ team.score || 'Yet to Bat' }}</ng-template>
      </ng-template>
    </div>
  </div>
</ng-template>

<!-- --Reusable Batting Table ---->
<ng-template #battingTable let-batters="batters">
  <div class="table-scroll">
    <table class="scorecard-table">
      <thead>
        <tr>
          <th>Batter</th>
          <th>R</th>
          <th>B</th>
          <th>4s</th>
          <th>6s</th>
          <th>SR</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let batter of batters">
          <td class="player-batting">
            <div>{{ batter.player_name }}</div>
            <div>{{ batter.wicket_desc }}</div>
          </td>
          <td>{{ batter.runs }}</td>
          <td>{{ batter.balls }}</td>
          <td>{{ batter.bdry_four }}</td>
          <td>{{ batter.bdry_six }}</td>
          <td>{{ batter.strike_rate  }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</ng-template>

<!-- --Reusable Bowling Table ---->
<ng-template #bowlingTable let-bowlers="bowlers">
  <div class="table-scroll">
    <table class="scorecard-table">
      <thead>
        <tr>
          <th>Bowler</th>
          <th>O</th>
          <th>M</th>
          <th>R</th>
          <th>W</th>
          <th>ER</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let bowler of bowlers">
          <td>{{ bowler.player_name }}</td>
          <td>{{ bowler.overs }}</td>
          <td>{{ bowler.maidens }}</td>
          <td>{{ bowler.runs }}</td>
          <td>{{ bowler.wicket }}</td>
          <td>{{ bowler.economy }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</ng-template>